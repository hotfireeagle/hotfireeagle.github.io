<!DOCTYPE html>
<html>
<head><link rel=manifest href=/manifest.json><meta name="generator" content="Hexo 3.8.0"><link rel="manifest" href="/manifest.json">
    <!-- so meta -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="HandheldFriendly" content="True">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta name="description" content="1.基本名词 在MongoDB中，每个database都会有一个或者多个collection，为了便于理解，可以把collection理解为array。一个collection里可以拥有任意个documents，一个documents很像js里面的对象，同一个collection里面的documents不必存储具有同样数据结构的数据。注意在技术上，documents并不是作为JSON存储的，doc">
<meta name="keywords" content="express">
<meta property="og:type" content="article">
<meta property="og:title" content="express2之database">
<meta property="og:url" content="http://yoursite.com/2018/12/20/express2之database/index.html">
<meta property="og:site_name" content="夜游">
<meta property="og:description" content="1.基本名词 在MongoDB中，每个database都会有一个或者多个collection，为了便于理解，可以把collection理解为array。一个collection里可以拥有任意个documents，一个documents很像js里面的对象，同一个collection里面的documents不必存储具有同样数据结构的数据。注意在技术上，documents并不是作为JSON存储的，doc">
<meta property="og:locale" content="default">
<meta property="og:updated_time" content="2018-12-23T08:45:43.031Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="express2之database">
<meta name="twitter:description" content="1.基本名词 在MongoDB中，每个database都会有一个或者多个collection，为了便于理解，可以把collection理解为array。一个collection里可以拥有任意个documents，一个documents很像js里面的对象，同一个collection里面的documents不必存储具有同样数据结构的数据。注意在技术上，documents并不是作为JSON存储的，doc">
    
    
        
          
              <link rel="shortcut icon" href="/images/favicon.ico">
          
        
        
          
            <link rel="icon" type="image/png" href="/images/favicon-192x192.png" sizes="192x192">
          
        
        
          
            <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">
          
        
    
    <!-- title -->
    <title>express2之database</title>
    <!-- styles -->
    <link rel="stylesheet" href="/css/style.css">
    <!-- persian styles -->
    
      <link rel="stylesheet" href="/css/rtl.css">
    
    <!-- rss -->
    
    
</head>

<body class="max-width mx-auto px3 ltr">
    
      <div id="header-post">
  <a id="menu-icon" href="#"><i class="fas fa-bars fa-lg"></i></a>
  <a id="menu-icon-tablet" href="#"><i class="fas fa-bars fa-lg"></i></a>
  <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fas fa-chevron-up fa-lg"></i></a>
  <span id="menu">
    <span id="nav">
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/archives/">Writing</a></li>
         
          <li><a href="https://github.com/hotfireeagle">Projects</a></li>
        
      </ul>
    </span>
    <br>
    <span id="actions">
      <ul>
        
        <li><a class="icon" href="/2018/12/26/flutter学习1/"><i class="fas fa-chevron-left" aria-hidden="true" onmouseover="$('#i-prev').toggle();" onmouseout="$('#i-prev').toggle();"></i></a></li>
        
        
        <li><a class="icon" href="/2018/12/18/小程序性能优化/"><i class="fas fa-chevron-right" aria-hidden="true" onmouseover="$('#i-next').toggle();" onmouseout="$('#i-next').toggle();"></i></a></li>
        
        <li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fas fa-chevron-up" aria-hidden="true" onmouseover="$('#i-top').toggle();" onmouseout="$('#i-top').toggle();"></i></a></li>
        <li><a class="icon" href="#"><i class="fas fa-share-alt" aria-hidden="true" onmouseover="$('#i-share').toggle();" onmouseout="$('#i-share').toggle();" onclick="$('#share').toggle();return false;"></i></a></li>
      </ul>
      <span id="i-prev" class="info" style="display:none;">Previous post</span>
      <span id="i-next" class="info" style="display:none;">Next post</span>
      <span id="i-top" class="info" style="display:none;">Back to top</span>
      <span id="i-share" class="info" style="display:none;">Share post</span>
    </span>
    <br>
    <div id="share" style="display: none">
      <ul>
  <li><a class="icon" href="http://www.facebook.com/sharer.php?u=http://yoursite.com/2018/12/20/express2之database/"><i class="fab fa-facebook " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://twitter.com/share?url=http://yoursite.com/2018/12/20/express2之database/&text=express2之database"><i class="fab fa-twitter " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.linkedin.com/shareArticle?url=http://yoursite.com/2018/12/20/express2之database/&title=express2之database"><i class="fab fa-linkedin " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=http://yoursite.com/2018/12/20/express2之database/&is_video=false&description=express2之database"><i class="fab fa-pinterest " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=express2之database&body=Check out this article: http://yoursite.com/2018/12/20/express2之database/"><i class="fas fa-envelope " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://getpocket.com/save?url=http://yoursite.com/2018/12/20/express2之database/&title=express2之database"><i class="fab fa-get-pocket " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://reddit.com/submit?url=http://yoursite.com/2018/12/20/express2之database/&title=express2之database"><i class="fab fa-reddit " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.stumbleupon.com/submit?url=http://yoursite.com/2018/12/20/express2之database/&title=express2之database"><i class="fab fa-stumbleupon " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://digg.com/submit?url=http://yoursite.com/2018/12/20/express2之database/&title=express2之database"><i class="fab fa-digg " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.tumblr.com/share/link?url=http://yoursite.com/2018/12/20/express2之database/&name=express2之database&description="><i class="fab fa-tumblr " aria-hidden="true"></i></a></li>
</ul>

    </div>
    <div id="toc">
      
    </div>
  </span>
</div>

    
    <div class="content index my4">
        
        <article class="post" itemscope itemtype="http://schema.org/BlogPosting">
  <header>
    
    <h1 class="posttitle" itemprop="name headline">
        express2之database
    </h1>



    <div class="meta">
      <span class="author" itemprop="author" itemscope itemtype="http://schema.org/Person">
        <span itemprop="name">夜游</span>
      </span>
      
    <div class="postdate">
        <time datetime="2018-12-20T15:14:29.000Z" itemprop="datePublished">2018-12-20</time>
    </div>


      

      
    <div class="article-tag">
        <i class="fas fa-tag"></i>
        <a class="tag-link" href="/tags/express/">express</a>
    </div>


    </div>
  </header>
  

  <div class="content" itemprop="articleBody">
    <p><strong>1.基本名词</strong></p>
<p>在MongoDB中，每个database都会有一个或者多个collection，为了便于理解，可以把collection理解为array。一个collection里可以拥有任意个documents，一个documents很像js里面的对象，同一个collection里面的documents不必存储具有同样数据结构的数据。注意在技术上，documents并不是作为JSON存储的，documents看起来很像json，但是实际上它是binary JSON，俗称BSON。Mongo会给每个document增加一个_id属性，这个_id属性是独一无二的。</p>
<p><strong>2.关于加密库</strong></p>
<p>node不适合做计算密集型的工作任务，而对于密码学来说，往往需要很大的计算量，辛亏在node中可以很方便的调用node的扩展，所以有个bcrypt的库，其使用了C代码来处理这部分计算，加快了计算量。</p>
<p><strong>3.POST请求之body-parser</strong></p>
<p>POST请求传过来的参数可以是多种编码格式的，这个可以通过请求头里面的Content-Type字段看出，比如说下面这些：application/x-www-form-urlencoded(常见于form注册)，application/json常见于ajax发送json数据的时候，除了上面两种Content-Type之外，还存在其他常用的content-type，可以查阅相关资料，这里要说的是，在express中如何在req.body里面使用它们：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> app = express();</span><br><span class="line"><span class="keyword">const</span> bodyParser = <span class="built_in">require</span>(<span class="string">'body-parser'</span>);</span><br><span class="line"></span><br><span class="line">app.use(bodyParser.urlencoded(&#123; <span class="attr">extended</span>: <span class="literal">false</span> &#125;)); <span class="comment">// 针对application/x-www-form-urlencoded</span></span><br><span class="line">app.use(bodyParser.json()); <span class="comment">// 针对application/json</span></span><br></pre></td></tr></table></figure>
<p><strong>4.express之用户鉴权</strong></p>
<p>用户鉴权具有很多种方式，常见的有session-cookie机制，token机制，OAuth机制，下面进行逐一介绍：</p>
<p>4-1.session-cookie机制：基本概念：服务端的session，客户端的cookie，利用cookie和session来完成前后端的认证。因为HTTP请求是无状态的，所以服务器不能识别出用户的身份。采用session-cookie机制的话，就引入了一种判断用户身份的唯一标志session，每当用户进行登录的时候，服务端便会为该用户创建一个session（会话），这个session能够用来唯一标识用户，那么问题来了，session是服务端的，那么下次这个客户端的请求到来时，服务器怎么知道是这个用户呢？答案就是让用户携带和自己session所唯一对应的cookie进来，这个cookie在用户进行登录成功的时候服务端便设置好了，以后的客户端的每一次请求便会把这个cookie给携带进来，而服务端在每一次请求到来时都会去查一下该客户在本地有没有对应session，如果有的话，那么就说明验证成功了。</p>
<p>session-cookie机制主要分为下面几个步骤：</p>
<p>①.服务器在用户成功登录后在服务器端创建session-&gt;持久化保存session-&gt;给这个session生成一个唯一对应的sessionId</p>
<p>②.sessionId签名，根据设置的secret对sid进行加密处理，下次收到sid时接着会根据secret进行解密处理。（注意签名过程非必须）-&gt; 在该请求的响应头中种下这个sid。</p>
<p>③.浏览器在收到响应后，将sid保存到本地cookie中，使得浏览器接下来的请求能够将sid存在cookie中发送给服务端。</p>
<p>④.服务端在需要登录的接口上面验证客户端时候携带了sid，并且查找这个sid是否有在服务端中维护，如果有的话，那么就说明鉴权通过。</p>
<p>4-2:在Express中如何使用passport插件，首先要搞清楚，passport不负责实现鉴权逻辑，它只是一层包装，鉴权逻辑在包装里面，需要开发人员自行编写。使用passport进行用户鉴权的话，开发人员主要完成下面三部分逻辑处理：</p>
<p>①.在Express中引入中间件。</p>
<p>②.告诉passport如何去序列化和反序列化用户，这部分将用户的session映射成了实际的user object。</p>
<p>③.告诉passport怎么进行用户授权，既判断一个用户是否在系统中。 这个时候passport会和Mongo进行接触。</p>
<p>第一步：引入相关中间件，这个步骤依赖body-parser，cookie-parser，express-session，passport，passport-local。</p>
<p>示例代码：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> express = <span class="built_in">require</span>(<span class="string">'express'</span>);</span><br><span class="line"><span class="keyword">const</span> mongoose = <span class="built_in">require</span>(<span class="string">'mongoose'</span>);</span><br><span class="line"><span class="keyword">const</span> bodyParser = <span class="built_in">require</span>(<span class="string">'body-parser'</span>);</span><br><span class="line"><span class="keyword">const</span> cookieParser = <span class="built_in">require</span>(<span class="string">'cookieParser'</span>);</span><br><span class="line"><span class="keyword">const</span> session = <span class="built_in">require</span>(<span class="string">'express-session'</span>);</span><br><span class="line"><span class="keyword">const</span> passport = <span class="built_in">require</span>(<span class="string">'passport'</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> authSetting = <span class="built_in">require</span>(<span class="string">'./authSetting'</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> app = express();</span><br><span class="line"></span><br><span class="line">mongoose.connect(<span class="string">'mongodb://localhost:27017/test'</span>, &#123; <span class="attr">userNewUrlParser</span>: <span class="literal">true</span> &#125;);</span><br><span class="line"></span><br><span class="line">authSetting(); <span class="comment">// 一个配置passport的文件</span></span><br><span class="line"></span><br><span class="line">app.use(passport.initialize());</span><br><span class="line">app.use(passport.session());</span><br><span class="line">app.use(bodyParser.urlencoded(&#123; <span class="attr">extended</span>: <span class="literal">false</span> &#125;));                          <span class="comment">// content-type 为 x-www-form-urlencoded</span></span><br><span class="line">app.use(bodyParser.json());                                                   <span class="comment">// content-type 为 application/json</span></span><br><span class="line">app.use(cookieParser());</span><br><span class="line">app.use(session(&#123;</span><br><span class="line">  secret: <span class="string">'YOU_SESSION_SECRET'</span>,</span><br><span class="line">  resave: <span class="literal">true</span>,</span><br><span class="line">  saveUninitialized: <span class="literal">true</span></span><br><span class="line">&#125;));</span><br></pre></td></tr></table></figure>
<p>第二步：告诉passport怎么序列化用户和反序列化用户。思考一下在express MongoDB技术栈里面如何将用户传过来的sid对应到user object上面，我们知道在MongoDB里面每一个文档都具有一个唯一的_id字段，利用这个字段来唯一标识用户是个可行的办法，并且查询的时候利用_id来查，效率也会比普通字段属性会更好。下面是实例代码：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// authSetting.js</span></span><br><span class="line"><span class="keyword">const</span> passport = <span class="built_in">require</span>(<span class="string">'passport'</span>);</span><br><span class="line"><span class="keyword">const</span> User = <span class="built_in">require</span>(<span class="string">'./models/user'</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">// 序列化用户，将用户转化为id</span></span><br><span class="line">  passport.serializeUser(<span class="function"><span class="keyword">function</span>(<span class="params">user, done</span>) </span>&#123;</span><br><span class="line">    done(<span class="literal">null</span>, user._id);</span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="comment">// 解序列化用户，将用户id转化为user object</span></span><br><span class="line">  passport.deserializeUser(<span class="function"><span class="keyword">function</span>(<span class="params">id, done</span>) </span>&#123;</span><br><span class="line">    User.findById(id, <span class="function"><span class="keyword">function</span>(<span class="params">err, user</span>) </span>&#123;</span><br><span class="line">      done(err, user);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>第三步：如何进行用户授权，在这一步中需要用上策略，这本例中使用本地策略。使用本地策略需要引入一个npm包-passport-local，如下所示：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 在原有authSetting.js中加入</span></span><br><span class="line"><span class="keyword">const</span> LocalStrategy = <span class="built_in">require</span>(<span class="string">'passport-local'</span>).Strategy; <span class="comment">// 引入本地passport-策略包</span></span><br></pre></td></tr></table></figure>
<p>接下来就是制定本地策略，如下所示：1.客户端在进行登录的时候，服务端获取到用户名（或其他id)；2.服务端根据这个用户名查找mongodb数据库中是否存在该用户，如果没有的话，可以返回这个用户未注册；3.如果存在这个用户的话，那么继续比对密码，如果密码正确的话，那么返回user object，如果密码比对错误的话，那么返回密码错误。示例代码如下所示：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// authSetting.js</span></span><br><span class="line">passport.use(<span class="string">'login'</span>, <span class="keyword">new</span> LocalStrategy(<span class="function"><span class="keyword">function</span>(<span class="params">username, password, done</span>) </span>&#123;</span><br><span class="line">  User.findOne(&#123;username&#125;, <span class="function"><span class="keyword">function</span>(<span class="params">err, user</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// 查询数据库的时候报错</span></span><br><span class="line">    <span class="keyword">if</span> (err) &#123;</span><br><span class="line">      <span class="keyword">return</span> done(err);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 不存在这个用户</span></span><br><span class="line">    <span class="keyword">if</span> (!user) &#123;</span><br><span class="line">      <span class="keyword">return</span> done(<span class="literal">null</span>, <span class="literal">false</span>, &#123; <span class="attr">message</span>: <span class="string">'No User Has That Username'</span> &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">    user.checkPassword(password, <span class="function"><span class="keyword">function</span>(<span class="params">err, isMatch</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">if</span> (err) &#123;  <span class="comment">// 取密码出错</span></span><br><span class="line">        <span class="keyword">return</span> done(err);</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">if</span> (isMatch) &#123;  <span class="comment">// 有这个用户，则返回这个用户</span></span><br><span class="line">        <span class="keyword">return</span> done(<span class="literal">null</span>, user);</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;    <span class="comment">// 密码错误</span></span><br><span class="line">        <span class="keyword">return</span> done(<span class="literal">null</span>, <span class="literal">false</span>, &#123; <span class="attr">message</span>: <span class="string">'Invalid password.'</span> &#125;);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;));</span><br></pre></td></tr></table></figure>
<p>4-2.token机制：和session-cookie很像。大致流程如下所示：</p>
<p>①.客户进行登录</p>
<p>②.如果成功登录，服务端给这个用户生成一个唯一对应的token，并且将这个token返回给客户端</p>
<p>③.客户端将这个token进行存储</p>
<p>④.客户端接将token放在请求头里面发送给服务端</p>
<p>⑤.服务端在需要登录的页面中进行token验证，如果请求通过的话则放行。</p>
<p>和session-cookie的区别：</p>
<p>①.session-cookie需要经过一个中间层sid，而token不需要，就是直接代表了用户，并且在用户端和服务端之间传输。</p>
<p>②.不需要cookie进行配合，</p>
<p>示例代码：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

  </div>
</article>



    </div>
    
      <div id="footer-post-container">
  <div id="footer-post">

    <div id="nav-footer" style="display: none">
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/archives/">Writing</a></li>
         
          <li><a href="https://github.com/hotfireeagle">Projects</a></li>
        
      </ul>
    </div>

    <div id="toc-footer" style="display: none">
      
    </div>

    <div id="share-footer" style="display: none">
      <ul>
  <li><a class="icon" href="http://www.facebook.com/sharer.php?u=http://yoursite.com/2018/12/20/express2之database/"><i class="fab fa-facebook fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://twitter.com/share?url=http://yoursite.com/2018/12/20/express2之database/&text=express2之database"><i class="fab fa-twitter fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.linkedin.com/shareArticle?url=http://yoursite.com/2018/12/20/express2之database/&title=express2之database"><i class="fab fa-linkedin fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=http://yoursite.com/2018/12/20/express2之database/&is_video=false&description=express2之database"><i class="fab fa-pinterest fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=express2之database&body=Check out this article: http://yoursite.com/2018/12/20/express2之database/"><i class="fas fa-envelope fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://getpocket.com/save?url=http://yoursite.com/2018/12/20/express2之database/&title=express2之database"><i class="fab fa-get-pocket fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://reddit.com/submit?url=http://yoursite.com/2018/12/20/express2之database/&title=express2之database"><i class="fab fa-reddit fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.stumbleupon.com/submit?url=http://yoursite.com/2018/12/20/express2之database/&title=express2之database"><i class="fab fa-stumbleupon fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://digg.com/submit?url=http://yoursite.com/2018/12/20/express2之database/&title=express2之database"><i class="fab fa-digg fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.tumblr.com/share/link?url=http://yoursite.com/2018/12/20/express2之database/&name=express2之database&description="><i class="fab fa-tumblr fa-lg" aria-hidden="true"></i></a></li>
</ul>

    </div>

    <div id="actions-footer">
        <a id="menu" class="icon" href="#" onclick="$('#nav-footer').toggle();return false;"><i class="fas fa-bars fa-lg" aria-hidden="true"></i> Menu</a>
        <a id="toc" class="icon" href="#" onclick="$('#toc-footer').toggle();return false;"><i class="fas fa-list fa-lg" aria-hidden="true"></i> TOC</a>
        <a id="share" class="icon" href="#" onclick="$('#share-footer').toggle();return false;"><i class="fas fa-share-alt fa-lg" aria-hidden="true"></i> Share</a>
        <a id="top" style="display:none" class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fas fa-chevron-up fa-lg" aria-hidden="true"></i> Top</a>
    </div>

  </div>
</div>

    
    <footer id="footer">
  <div class="footer-left">
    Copyright &copy; 2019 hahahai
  </div>
  <div class="footer-right">
    <nav>
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/archives/">Writing</a></li>
         
          <li><a href="https://github.com/hotfireeagle">Projects</a></li>
        
      </ul>
    </nav>
  </div>
</footer>

<script>if ('serviceWorker' in navigator) {
  navigator.serviceWorker.register('/sw.js?t=1561456773694')
    .then(function () {console.log('ServiceWorker Register Successfully.')})
    .catch(function (e) {console.error(e)});
}
</script></body>
</html>
<!-- styles -->
<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">
<link rel="stylesheet" href="/lib/justified-gallery/css/justifiedGallery.min.css">

<!-- jquery -->
<script src="/lib/jquery/jquery.min.js"></script>
<script src="/lib/justified-gallery/js/jquery.justifiedGallery.min.js"></script>
<script src="/js/main.js"></script>
<!-- search -->

<!-- Google Analytics -->

<!-- Baidu Analytics -->

<!-- Disqus Comments -->


